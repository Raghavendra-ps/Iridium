{% extends "dashboard_base.html" %} {% block title %}Job #{{ job_id }} -
Iridium{% endblock %} {% block content %}
<!-- NEW: Added an ID and a data attribute to pass the job_id to our JS file -->
<div id="job-detail-page" data-job-id="{{ job_id }}">
    <div class="card">
        <div
            style="
                display: flex;
                justify-content: space-between;
                align-items: center;
            "
        >
            <div>
                <h1 id="job-title" class="card-title">
                    Loading Job Details...
                </h1>
                <p id="job-subtitle" style="color: var(--color-text-muted)"></p>
            </div>
            <div
                id="job-status-badge"
                style="
                    background: #eee;
                    padding: 6px 12px;
                    border-radius: 99px;
                    font-size: 0.9rem;
                    font-weight: 500;
                "
            >
                LOADING
            </div>
        </div>
    </div>
    <div class="card">
        <h2 class="card-title">Extracted Data (Editable)</h2>
        <div
            id="data-grid-container"
            style="
                width: 100%;
                min-height: 400px;
                display: flex;
                align-items: center;
                justify-content: center;
                border: 1px solid var(--color-border);
                border-radius: 8px;
                background: #f8fafc;
            "
        >
            <p id="grid-status">Waiting for file processing to complete...</p>
        </div>
        <div
            id="actions-bar"
            style="
                margin-top: 1.5rem;
                display: none;
                justify-content: space-between;
                align-items: center;
            "
        >
            <div
                id="action-status"
                style="font-size: 0.9rem; color: var(--color-text-muted)"
            ></div>
            <div style="display: flex; gap: 1rem">
                <button id="downloadBtn" class="btn">Download as JSON</button>
                <button
                    id="processBtn"
                    class="btn"
                    style="background-color: var(--color-accent); color: white"
                >
                    Process and Send to ERPNext
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %} {% block scripts %}
<!-- The entire script block is replaced by this single line -->
<script src="/static/js/job_detail.js" defer></script>
{% endblock %}
